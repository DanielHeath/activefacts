<!--#include virtual="/header.html" -->
<!--#include virtual="navbar.html" -->

<link rel="stylesheet" href="../css/offline.css" media="screen" type="text/css" />
<link rel="stylesheet" href="../css/print.css" media="print" type="text/css" />

<div id="sidebar"></div>

<div id="top" class="content">

  <h2>ActiveFacts Example Models</h2>
  <p class="offline noprint"><font size="-1">Copyright (c) 2007 Clifford Heath.</font></p>

  <!-- Things to show only in the offline version -->
  <div class="localnav offline noprint">
    <ul>
      <li id="nav-home"><a href="/" title="Home">Home</a></li>
      <li><a href="/ActiveFacts/" title="ActiveFacts Home">ActiveFacts Home</a></li>
      <li><a title="Start Here" href="#CompanyDirectorEmployee"> Start Here </a></li>
      <li><a title="Metamodel" href="#Metamodel"> Metamodel </a></li>
      <li><a title="All Examples" href="#AllExamples"> Table of all examples </a></li>
    </ul>
  </div>

  <p> ActiveFacts converts fact-oriented models into matching object-oriented and
  relational models. It accepts models in <a href="../CQLIntroduction.html">the Constellation Query Language</a> (CQL)
  or <a href="http://www.ormfoundation.org/files/">NORMA</a>, and emits CQL,
  Ruby, or SQL. This page contains many examples.</p>

  <p>The CQL files look like hand-written code, but they aren't.
  They're generated from the ORM2 files, and have not been edited.
  You can of course write them by hand.
  </p>

  <p>
  The ActiveFacts generator <em>afgen</em> does semantic analysis to convert these
  input files to SQL or Ruby, using the relational and object-oriented mapping algorithms.
  The Ruby code uses the Constellation API provided by the <em>activefacts</em> gem.
  </p>

  <p>
  To make a start learning Object Role Modeling, read the
  <a href="intro.html">Introduction to ORM2</a> or check the Resources page
  for other sites.

  </p>

  <p class="offline">
  If you're looking at a git clone of this project, and have Visual Studio (pro)
  on Windows with NORMA installed, you can open the Visual Studio solution
  <a href="norma/ExampleModels.sln">here</a>.
  Otherwise, you won't be able to edit the ORM2 files, but never fear,
  you can do all the same things by editing the CQL text.
  </p>

  <a id="AllExamples"></a>

  <h3>Table of examples</h3>
  <table class="examples" width="100%">

  <!--tr>
  <th>Model Name</th>
  <td></td>
  <td></td>
  <td></td>
  <th>ORM2 Diagrams</th-->

  <tr class="odd">
  <td class="title">
    <a id="Address" href="CQL/Address.cql">CQL</a>
    <span>Address</span>
    <div class="diagrams">
    <a href="images/Address.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/Address.rb">Ruby</a></td>
  <td><a href="SQL/Address.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="odd"><td colspan="5">
  Shows how the relational mapping algorithm makes the minimum number of tables
  <a href="norma/Address.orm">xml</a>
  </td></tr>

  <tr class="even">
  <td class="title">
    <a id="Blog" href="CQL/Blog.cql">CQL</a>
    <span>Blog</span>
    <div class="diagrams">
    <a href="images/Blog.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/Blog.rb">Ruby</a></td>
  <td><a href="SQL/Blog.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="even"><td colspan="5">
  The Blog model supports a hierarchy of topics, Posts by Authors, each Post
  consisting of a series of styled Paragraphs. Comments may be made on individual
  Paragraphs. <a href="norma/Blog.orm">xml</a>
  </td></tr>

  <tr class="odd">
  <td class="title">
    <a id="CompanyDirectorEmployee" href="CQL/CompanyDirectorEmployee.cql">CQL</a>
    <span>CompanyDirectorEmployee</span>
    <div class="diagrams">
    <a href="images/CompanyDirectorEmployee.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/CompanyDirectorEmployee.rb">Ruby</a></td>
  <td><a href="SQL/CompanyDirectorEmployee.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="odd"><td colspan="5">
  This model shows the relationships of a person to a company of which they are a director or employee. <a href="norma/CompanyDirectorEmployee.orm">xml</a>
  </td></tr>

  <tr class="even">
  <td class="title">
    <a id="Death" href="CQL/Death.cql">CQL</a>
    <span>Death</span>
    <div class="diagrams">
    <a href="images/Death.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/Death.rb">Ruby</a></td>
  <td><a href="SQL/Death.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="even"><td colspan="5">
  This model shows a objectified unary fact type. <a href="norma/Death.orm">xml</a>
  </td></tr>

  <tr class="odd">
  <td class="title">
    <a id="Genealogy" href="CQL/Genealogy.cql">CQL</a>
    <span>Genealogy</span>
    <div class="diagrams">
    <a href="images/Genealogy.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/Genealogy.rb">Ruby</a></td>
  <td><a href="SQL/Genealogy.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="odd"><td colspan="5">
  An event-based model for Genealogy which allows for different versions of the same fact
  to be claimed by different sources, for use in reconciling contradictory information. <a href="norma/Genealogy.orm">xml</a>
  </td></tr>

  <tr class="even">
  <td class="title">
    <a id="Insurance" href="CQL/Insurance.cql">CQL</a>
    <span>Insurance</span>
    <div class="diagrams">
    <a href="images/Insurance/Insurance.png">Insurance</a>
    <a href="images/Insurance/Person.png">Person</a>
    <a href="images/Insurance/Policy.png">Policy</a>
    <a href="images/Insurance/Claim.png">Claim</a>
    <a href="images/Insurance/VehicleIncident.png">VehicleIncident</a>
    <a href="images/Insurance/Related.png">Related</a>
    </div>
  </td>
  <td><a href="ruby/Insurance.rb">Ruby</a></td>
  <td><a href="SQL/Insurance.sql">SQL</a></td>
  <td></td>
  </tr>
  <tr class="even"><td colspan="5">
  A partial model for an insurance company's claims management, extended into automotive insurance claims
  </td></tr>

  <tr class="odd">
  <td class="title">
    <a id="JoinEquality" href="CQL/JoinEquality.cql">CQL</a>
    <span>JoinEquality</span>
    <div class="diagrams">
    <a href="images/JoinEquality.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/JoinEquality.rb">Ruby</a></td>
  <td><a href="SQL/JoinEquality.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="odd"><td colspan="5">
  An example of a join equality constraint. The highlighted constraint requires that
  tickets issued for an event are for a seat at the venue where that event will be held. <a href="norma/JoinEquality.orm">xml</a>
  </td></tr>

  <tr class="even">
  <td class="title">
    <a id="Marriage" href="CQL/Marriage.cql">CQL</a>
    <span>Marriage</span>
    <div class="diagrams">
    <a href="images/Marriage.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/Marriage.rb">Ruby</a></td>
  <td><a href="SQL/Marriage.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="even"><td colspan="5">
  This shows a conventional model of marriage, to demonstrate the relational mapping (view the SQL). <a href="norma/Marriage.orm">xml</a>
  </td></tr>

  <tr class="odd">
  <td class="title">
    <a id="Metamodel" href="CQL/Metamodel.cql">CQL</a>
    <span>Metamodel</span>
    <div class="diagrams">
    <a href="images/Metamodel/Objects.png">Objects</a>
    <a href="images/Metamodel/Terms.png">Terms</a>
    <a href="images/Metamodel/ValueTypes.png">ValueTypes</a>
    <a href="images/Metamodel/Constraints.png">Constraints</a>
    <a href="images/Metamodel/Units.png">Units</a>
    <a href="images/Metamodel/Joins.png">Joins</a>
    <a href="images/Metamodel/Values.png">Values</a>
    <a href="images/Metamodel/Populations.png">Populations</a>
    <a href="images/Metamodel/Context.png">Context</a>
    <a href="images/Metamodel/Diagrams.png">Diagrams</a>
    </div>
  </td>
  <td><a href="ruby/Metamodel.rb">Ruby</a></td>
  <td><a href="SQL/Metamodel.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="odd"><td colspan="5">
  This is the metamodel of ActiveFacts itself.
  The generated Ruby code provides the intermediate representation for the compiler!
  <br>
  <br>
  The Metamodel encodes the meaning of an ORM2 or CQL model. All features of the
  ORM2 and CQL languages have a representation here, as well as a few CQL features
  that haven't yet been implemented yet.
  </td></tr>

  <tr class="even">
  <td class="title">
    <a id="MultiInheritance" href="CQL/MultiInheritance.cql">CQL</a>
    <span>MultiInheritance</span>
    <div class="diagrams">
    <a href="images/MultiInheritance.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/MultiInheritance.rb">Ruby</a></td>
  <td><a href="SQL/MultiInheritance.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="even"><td colspan="5">
  An example of multiple inheritance. The solid subtype connectors show the identification
  path (for example, an AustralianEmployee is identified by his/her EmployeeID). <a href="norma/MultiInheritance.orm">xml</a>
  </td></tr>

  <tr class="odd">
  <td class="title">
    <a id="OilSupply" href="CQL/OilSupply.cql">CQL</a>
    <span>OilSupply</span>
    <div class="diagrams">
    <a href="images/OilSupply.png">diagram</a><br>
    </div>
  </td>
  <td><a href="ruby/OilSupply.rb">Ruby</a></td>
  <td><a href="SQL/OilSupply.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="odd"><td colspan="5">
  A model of the supply and demand for refined oil.
  A populated database can be used to optimise profitability by minimising transport costs,
  maximise supply by allowing substitution of compatible products (with compatibility depending on season)
  and also to predict shortages. <a href="norma/OilSupply.orm">xml</a>
  </td></tr>

  <tr class="even">
  <td class="title">
    <a id="Orienteering" href="CQL/Orienteering.cql">CQL</a>
    <span>Orienteering</span>
    <div class="diagrams">
    <a href="images/Orienteering/Administration.png">Administration</a>
    <a href="images/Orienteering/Registration.png">Registration</a>
    <a href="images/Orienteering/Scoring.png">Scoring</a>
    </div>
  </td>
  <td><a href="ruby/Orienteering.rb">Ruby</a></td>
  <td><a href="SQL/Orienteering.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="even"><td colspan="5">
  A model for the sport of Orienteering, broken into three diagrams. <a href="norma/Orienteering.orm">xml</a>
  </td></tr>

  <tr class="odd">
  <td class="title">
    <a id="OrienteeringER" href="CQL/OrienteeringER.cql">CQL</a>
    <span>OrienteeringER</span>
    <div class="diagrams">
    <a href="images/OrienteeringER.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/OrienteeringER.rb">Ruby</a></td>
  <td><a href="SQL/OrienteeringER.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="odd"><td colspan="5">
  This is an illegal ORM2 model, for illustrative purposes. It contains a compound fact type. <a href="norma/OrienteeringER.orm">xml</a>
  </td></tr>

  <tr class="even">
  <td class="title">
    <a id="PersonPlaysGame" href="CQL/PersonPlaysGame.cql">CQL</a>
    <span>PersonPlaysGame</span>
    <div class="diagrams">
    <a href="images/PersonPlaysGame.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/PersonPlaysGame.rb">Ruby</a></td>
  <td><a href="SQL/PersonPlaysGame.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="even"><td colspan="5">
  Perhaps the simplest possible model, which maps to a single table. <a href="norma/PersonPlaysGame.orm">xml</a>
  </td></tr>

  <tr class="odd">
  <td class="title">
    <a id="RedundantDependency" href="CQL/RedundantDependency.cql">CQL</a>
    <span>RedundantDependency</span>
    <div class="diagrams">
    <a href="images/RedundantDependency.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/RedundantDependency.rb">Ruby</a></td>
  <td><a href="SQL/RedundantDependency.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="odd"><td colspan="5">
  This model illustrates an outstanding problem in some fact-oriented modelling
  tools, including ActiveFacts. The problem is that the Address table contains
  two copies of the same value, StateOrProvinceId. <a href="norma/RedundantDependency.orm">xml</a>
  </td></tr>

  <tr class="even">
  <td class="title">
    <a id="SchoolActivities" href="CQL/SchoolActivities.cql">CQL</a>
    <span>SchoolActivities</span>
    <div class="diagrams">
    <a href="images/SchoolActivities.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/SchoolActivities.rb">Ruby</a></td>
  <td><a href="SQL/SchoolActivities.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="even"><td colspan="5">
  This model represents students representing their school in school-sanctioned activities.
  It includes the ternary StudentParticipation <em>Fact Type</em>, which represents a student's
  participation in a school-sanctioned activity.
  The model has constraints that allow a given Student to participate only in a given
  Activity for a single School, only representing the School in which they're enrolled, and
  only if the School sanctions that activity. <a href="norma/SchoolActivities.orm">xml</a>
  </td></tr>

  <tr class="odd">
  <td class="title">
    <a id="Warehousing" href="CQL/Warehousing.cql">CQL</a>
    <span>Warehousing</span>
    <div class="diagrams">
    <a href="images/Warehousing.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/Warehousing.rb">Ruby</a></td>
  <td><a href="SQL/Warehousing.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="odd"><td colspan="5">
  Based on a classic model of warehousing, it records stock levels for every product
  in each bin in every warehouse, and allows incoming and outgoing products to be
  allocated to be allocated to orders, including requests for transfers between
  warehouses. An order does not have to be shipped in a single shipment, but each
  item must be checked off for each shipment. <a href="norma/Warehousing.orm">xml</a>
  </td></tr>

  <tr class="even">
  <td class="title">
    <a id="Unit" href="unit.cql">CQL</a>
    <span>Unit conversions</span>
  </td>
  <td></td>
  <td></td>
  <td>
  </tr>
  <tr class="even"><td colspan="5">
  This CQL file contains an extensive library of fundamental units and unit conversions.
  These definitions can be used with your value types, so that queries can convert values
  from any compatible units.
  </td></tr>

  <tr class="odd">
  <td class="title">
    <a id="WindowInRoomInBldg" href="CQL/WindowInRoomInBldg.cql">CQL</a>
    <span>WindowInRoomInBldg</span>
    <div class="diagrams">
    <a href="images/WindowInRoomInBldg.png">diagram</a>
    </div>
  </td>
  <td><a href="ruby/WindowInRoomInBldg.rb">Ruby</a></td>
  <td><a href="SQL/WindowInRoomInBldg.sql">SQL</a></td>
  <td>
  </tr>
  <tr class="odd"><td colspan="5">
  This model shows how object types can get absorbed into others for efficient storage.
  In this case, every window is in a wall, every wall in a room, and every room in a
  building - yet only one table is needed to store a record of all windows. Try adding
  further properties to a room, and see what happens to the relational form! <a href="norma/WindowInRoomInBldg.orm">xml</a>
  </td></tr>

  </table>

</div>

<!--#include virtual="/footer.html" -->
